---
import BaseLayout from '../layouts/BaseLayout.astro';
import PageHero from '../components/sections/PageHero.astro';
import SpotlightCard from '../components/ui/SpotlightCard';
import StandardButton from '../components/ui/StandardButton.astro';
import {
  CloudTopologyVisual,
  UniversalPlatformVisual,
  TechStackVisual,
  SignalPulseVisual,
  MigrationVisual
} from '../components/interactive/AdvancedVisuals';
import { WebAppVisual } from '../components/interactive';
import { Code, Cloud, Smartphone, Layers, Wifi, RefreshCw } from 'lucide-react';
import { createBreadcrumbSchema } from '../lib/seo-helpers';

const pageTitle = 'Services - TipThing';
const breadcrumbs = createBreadcrumbSchema([
  { name: 'Home', url: 'https://tipthing.com/' },
  { name: 'Services' },
]);
const pageDescription = 'We replace intuition with engineering. Our bespoke solutions are built on robust, scalable architectures.';

const services = [
  {
    icon: Code,
    title: "Bespoke Engineering",
    desc: "We don't use templates. We architect custom software platforms tailored to your specific operational constraints and business goals. From complex data-heavy web applications to internal tools, every line of code is purpose-built.",
    visual: "WebAppVisual"
  },
  {
    icon: Cloud,
    title: "Cloud Architecture",
    desc: "Scalable AWS & Azure infrastructure designed for reliability. We build resilient APIs, design optimised database schemas, and architect systems that handle spike loads without downtime.",
    visual: "CloudTopologyVisual"
  },
  {
    icon: Smartphone,
    title: "Mobile Ecosystems",
    desc: "Native-performance cross-platform applications for iOS and Android. Seamless experiences built with shared business logic and platform-specific polish where it matters.",
    visual: "UniversalPlatformVisual"
  },
  {
    icon: Layers,
    title: "Modern Stack",
    desc: "We build with Next.js, Rust, and Go â€” choosing the right tool for each layer of your system. Type-safe frontends, blazing backend services, and everything connected through well-defined contracts.",
    visual: "TechStackVisual"
  },
  {
    icon: Wifi,
    title: "IoT Connectivity",
    desc: "Real-time device mesh networks and telemetry pipelines. We connect physical devices to cloud dashboards with low-latency ingestion, protocol translation, and live monitoring at scale.",
    visual: "SignalPulseVisual"
  },
  {
    icon: RefreshCw,
    title: "Digital Transformation",
    desc: "Strangling monoliths into microservices. We migrate legacy PHP/.NET systems to modern stacks with zero downtime, preserving business continuity while unlocking new capabilities.",
    visual: "MigrationVisual"
  }
];
---

<BaseLayout title={pageTitle} description={pageDescription} currentPath="/services">
  <div class="min-h-screen pt-32 px-6 pb-20 bg-[#09090b] animate-in fade-in duration-500">
    <div class="max-w-7xl mx-auto">
      <PageHero
        eyebrow="Our Capabilities"
        title="Services."
        description="We replace intuition with engineering. Our bespoke solutions are built on robust, scalable architectures."
      />

      {/* All service visuals: client:visible - Below fold, load when scrolled into view */}
      <div class="flex flex-col gap-20 mb-20 pt-20">
        {services.map((service, i) => {
          const IconComponent = service.icon;
          const isEven = i % 2 === 0;

          return (
            <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center group">
              <div class={`order-2 ${isEven ? 'md:order-1' : 'md:order-2'}`}>
                <div class="w-12 h-12 rounded-lg bg-zinc-900 border border-white/10 flex items-center justify-center text-zinc-400 mb-6">
                  <IconComponent size={24} />
                </div>
                <h3 class="text-2xl font-bold text-white mb-4">{service.title}</h3>
                <p class="text-zinc-400 leading-relaxed mb-8 text-lg">{service.desc}</p>
              </div>
              <SpotlightCard
                client:visible
                className={`aspect-[4/3] order-1 ${isEven ? 'md:order-2' : 'md:order-1'}`}
              >
                <div class="h-full w-full p-1 bg-zinc-900/50">
                  <div class="h-full w-full rounded bg-zinc-950 border border-white/5 overflow-hidden relative">
                    <div class="absolute inset-0 flex items-center justify-center service-visual-scale">
                      {service.visual === "WebAppVisual" && <WebAppVisual client:visible />}
                      {service.visual === "CloudTopologyVisual" && <CloudTopologyVisual client:visible />}
                      {service.visual === "UniversalPlatformVisual" && <UniversalPlatformVisual client:visible />}
                      {service.visual === "TechStackVisual" && <TechStackVisual client:visible />}
                      {service.visual === "SignalPulseVisual" && <SignalPulseVisual client:visible />}
                      {service.visual === "MigrationVisual" && <MigrationVisual client:visible />}
                    </div>
                  </div>
                </div>
              </SpotlightCard>
            </div>
          );
        })}
      </div>
    </div>

    <!-- CTA Section -->
    <section class="py-32 px-6 bg-gradient-to-b from-[#09090b] to-zinc-950 mt-20">
      <div class="max-w-4xl mx-auto text-center">
        <h2 class="text-4xl md:text-6xl font-bold text-white mb-6 tracking-tight">
          Ready to build something remarkable?
        </h2>
        <p class="text-xl text-zinc-400 mb-12 max-w-2xl mx-auto leading-relaxed">
          Let's discuss your technical challenges. We typically respond within 24 hours.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
          <a href="/contact" class="w-full sm:w-auto">
            <StandardButton class="w-full sm:w-auto px-10">
              Start a Project
            </StandardButton>
          </a>
          <a href="/company" class="w-full sm:w-auto">
            <StandardButton variant="outline" className="w-full sm:w-auto px-10">
              Learn About Us
            </StandardButton>
          </a>
        </div>
      </div>
    </section>
  </div>
  <script type="application/ld+json" set:html={JSON.stringify(breadcrumbs)} />
</BaseLayout>

<style>
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-in {
    animation: fade-in 0.5s ease-out;
  }

  .fade-in {
    animation-name: fade-in;
  }

  .duration-500 {
    animation-duration: 0.5s;
  }

  /* Scale service visuals on mobile to prevent overflow/clipping */
  @media (max-width: 767px) {
    .service-visual-scale {
      transform: scale(0.85);
      transform-origin: center center;
    }
  }
</style>
